<!DOCTYPE html>
<html ng-app="pocketcivApp">
<head>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
<style>
    #canvases {
        position:relative;
        width: 800px;
        height: 800px;
    }
    .mapCanvas {
        position:absolute;
        top: 0px;
        left: 0px;
    }
    #images {
        display: none;
    }
</style>

<script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="//code.angularjs.org/1.2.9/angular.min.js"></script>
</head>    
<body ng-controller="MainGame">
    <div>{{ deck.cardsLeft }}
        <button ng-hide="hideDrawer" ng-click="drawCard()">draw</button>
    </div>
    <div>{{ card }}</div>
    
    <div id="map">
        <div id="images">
            <img id="mapImage7" src="app/img/modern/land7.png"/>
            <img id="mapImage8" src="app/img/modern/land8.png"/>
            <img id="mapImage-1" src="app/img/modern/water.png"/>
            <img id="mapImage0" src="app/img/modern/land.png"/>
            <img id="mapImage1" src="app/img/modern/land1.png"/>
            <img id="mapImage2" src="app/img/modern/land2.png"/>
            <img id="mapImage3" src="app/img/modern/land3.png"/>
            <img id="mapImage4" src="app/img/modern/land4.png"/>
            <img id="mapImage5" src="app/img/modern/land5.png"/>
            <img id="mapImage6" src="app/img/modern/land6.png"/>
        </div>
        <div id="canvases">
        <canvas class="mapCanvas" id="mapCanvas-1" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas0" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas1" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas2" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas3" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas4" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas5" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas6" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas7" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        <canvas class="mapCanvas" id="mapCanvas8" width="{{ map.width }}" height="{{ map.height }}"></canvas>
        </div>
        <textarea rows="5" cols="100">
        {{ map }}
        </textarea>
        <span>{{ areaChange }}<button ng-hide="!areaChange" ng-click="areaChangeOk()">OK</button></span>
    </div>
    
    <div id="mover" ng-hide="hideMover">
        <ul>
            <li ng-repeat="(id, area) in movement">{{ id }}: <input type="number" value="{{ area.tribes }}" ng-model="movement[id]"/></li>
        </ul>
        <button ng-click="moveTribes()">Move</button>
    </div>
    
    <div id="reducer" ng-hide="hideReducer">
        <span>Decimate {{ reduceAmount - reductions.length }} tribes</span>
        <ul>
            <li ng-repeat="id in reduceAreas">{{ id }}: <input type="number" value="0" ng-model="reductions[id]"/></li>
        </ul>
        <button ng-click="reduceTribes()">Decimate</button>
    </div>
    
    <div id="areaselect" ng-hide="possibleAreas.length == 0">
        <select ng-model="selectedArea" ng-options="a for a in possibleAreas"></select>
        <button ng-click="selectArea()">Select</button>
    </div>
    
    <div ng-hide="!possibleAdvances">
        <textarea cols="100">{{ possibleAdvances }}</textarea><br/>
        <input ng-model="acquire_name" /><input ng-model="acquire_area" /><button ng-click="acquireGo()">Go</button>
        <textarea cols="50">{{ acquired }}</textarea><br/>
        <button ng-click="acquireOk()">Acquire!</button>
    </div>
    
    <div id="phaser">
    <h2>Phases</h2>
        <ul>
            <li><button ng-click="engine.populate()" ng-disabled="engine.phase != 'populate'">1. Population</button></li>
            <li><button ng-click="engine.move()" ng-disabled="engine.phase != 'move'">2. Move</button></li>
<!--            <li><button ng-click="engine.event()" ng-disabled="engine.phase != 'event'">3. Event card</button></li>-->
            <li><button ng-click="engine.event()">3. Event card</button></li>
            <li>
                <ul ng-hide="engine.phase != 'advance'">
                    <li><button ng-click="engine.advance('farm')">4.1 Create a Farm</button></li>
                    <li><button ng-click="engine.advance('city')">4.2 Build a City</button></li>
                    <li><button ng-click="engine.advance('acquire')">4.2 Acquire Advances</button></li>
                </ul>
            </li>
        </ul>
    </div>
    
    <div id="advances">
        <input type="text" ng-model="acquireAdvance"/><button ng-click="engine.acquire(acquireAdvance)">Acquire!</button>
        <ul>
            <li ng-repeat="adv in engine.acquired">{{ adv.title }}</li>
        </ul>
    </div>
    
    <script type="text/javascript" src="app/lib/HexagonTools/js/HexagonTools.js"></script>
    <script type="text/javascript" src="app/lib/HexagonTools/js/HexCalcs.js"></script>
    <script type="text/javascript" src="app/lib/HexagonTools/js/Grid.js"></script>
    <script type="text/javascript" src="app/js/map.js"></script>
    <script type="text/javascript" src="bundle.js"></script>
</body>
</html>
